<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phoenix Dashboard | by Manav Mishra</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #111827;
            --bg-secondary: #1F2937;
            --bg-card: #374151;
            --text-primary: #F9FAFB;
            --text-secondary: #9CA3AF;
            --accent-primary: #3B82F6;
            --accent-secondary: #10B981;
            --accent-danger: #EF4444;
            --border-color: #4B5563;
            --shadow-color: rgba(0,0,0,0.5);
            --font-main: 'Inter', sans-serif;
            --glow-color: rgba(59, 130, 246, 0.5);
        }
        body {
            font-family: var(--font-main);
            background-color: var(--bg-main);
            color: var(--text-primary);
            margin: 0;
            overflow: hidden; /* Prevent body scroll */
        }
        #root { display: flex; height: 100vh; }

        /* --- Global Enhancements --- */
        ::selection { background-color: var(--accent-primary); color: white; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { background: var(--bg-card); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--border-color); }

        /* --- Sidebar --- */
        .sidebar {
            width: 250px; background-color: var(--bg-secondary);
            padding: 20px; display: flex; flex-direction: column;
            border-right: 1px solid var(--border-color);
            transition: width 0.3s ease;
        }
        .sidebar-header { text-align: center; margin-bottom: 30px; }
        .sidebar-header h1 { margin: 0; color: var(--accent-primary); letter-spacing: 1px; }
        .sidebar-nav button {
            display: block; width: 100%; text-align: left;
            padding: 15px; margin-bottom: 10px; background: none; border: none;
            color: var(--text-secondary); font-size: 1.1em; font-family: var(--font-main);
            border-radius: 8px; cursor: pointer; transition: all 0.2s ease-in-out;
        }
        .sidebar-nav button:hover { background-color: var(--bg-card); color: var(--text-primary); transform: translateX(5px); }
        .sidebar-nav button.active { background-color: var(--accent-primary); color: #fff; font-weight: 600; box-shadow: 0 0 15px var(--glow-color); }

        /* --- Main Content --- */
        .main-content { flex-grow: 1; padding: 30px; overflow-y: auto; }
        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Kanban Board --- */
        .kanban-board-container { display: flex; gap: 20px; overflow-x: auto; padding-bottom: 20px; min-height: 80vh;}
        .kanban-column {
            flex: 0 0 320px; background-color: var(--bg-secondary);
            border-radius: 8px; padding: 15px;
            display: flex; flex-direction: column;
        }
        .kanban-column-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--border-color); padding-bottom: 10px; margin-bottom: 15px; }
        .kanban-column-header input { background: none; border: none; color: var(--text-primary); font-size: 1.2em; font-weight: 600; width: 80%; }
        .tasks-container { min-height: 100px; flex-grow: 1; }
        .kanban-column.drag-over { border: 2px dashed var(--accent-primary); background-color: rgba(59, 130, 246,.1); }
        
        .task-card {
            background-color: var(--bg-card); padding: 15px; margin-bottom: 15px;
            border-radius: 8px; cursor: grab; border-left: 4px solid var(--accent-primary);
            box-shadow: 0 2px 5px var(--shadow-color);
            transition: all 0.2s ease;
        }
        .task-card:hover { transform: translateY(-2px); box-shadow: 0 4px 10px var(--shadow-color); }
        .task-card.dragging { opacity: 0.4; transform: scale(1.05) rotate(3deg); }
        .task-card .delete-btn {
            background-color: #4a5a6a; color: white; border: none;
            border-radius: 50%; width: 24px; height: 24px; font-size: 16px;
            line-height: 24px; text-align: center; cursor: pointer;
            opacity: 0; transition: all 0.2s; float: right;
        }
        .task-card:hover .delete-btn { opacity: 1; }
        .delete-btn:hover { background-color: var(--accent-danger); transform: scale(1.1); }
        .add-task-button {
            width: 100%; padding: 12px; border: 2px dashed var(--border-color);
            background-color: transparent; color: var(--text-secondary);
            border-radius: 8px; cursor: pointer; font-size: 1em;
            transition: all 0.2s;
        }
        .add-task-button:hover { background-color: var(--bg-card); color: var(--text-primary); border-style: solid; }

        /* --- Modal --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.7); display: flex;
            align-items: center; justify-content: center; z-index: 1000;
            animation: fadeIn 0.3s;
        }
        .modal-content {
            background: var(--bg-secondary); padding: 30px; border-radius: 12px;
            box-shadow: 0 10px 30px var(--shadow-color);
            width: 90%; max-width: 400px;
        }
        .modal-content h2 { margin-top: 0; color: var(--accent-primary); }
        .modal-content textarea {
            width: 100%; box-sizing: border-box; padding: 12px; margin-bottom: 20px;
            background: var(--bg-main); border: 1px solid var(--border-color);
            color: var(--text-primary); font-size: 1em; border-radius: 6px;
            font-family: var(--font-main); resize: vertical; min-height: 80px;
        }
        .modal-content textarea:focus { border-color: var(--accent-primary); box-shadow: 0 0 10px var(--glow-color); outline: none; }
        .modal-buttons { display: flex; justify-content: flex-end; gap: 10px; }
        .modal-buttons button {
            padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer;
            font-weight: 600;
        }
        .modal-buttons .save-btn { background-color: var(--accent-primary); color: #fff; }
        .modal-buttons .cancel-btn { background-color: var(--bg-card); color: var(--text-secondary); }
        
        /* Other components */
        .expense-form {
            background-color: var(--bg-secondary); padding: 20px; border-radius: 8px;
            display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 15px; align-items: end; margin-bottom: 20px;
        }
        .expense-form input {
            background-color: var(--bg-card); border: 1px solid var(--border-color);
            color: var(--text-primary); padding: 10px; border-radius: 6px;
        }
        .expense-form button {
            background-color: var(--accent-secondary); color: #fff; border: none;
            padding: 10px 20px; border-radius: 6px; cursor: pointer; height: 40px;
        }
        .expense-list table {
            width: 100%; border-collapse: collapse; background-color: var(--bg-secondary);
        }
        .expense-list th, .expense-list td {
            padding: 15px; text-align: left; border-bottom: 1px solid var(--border-color);
        }
        .expense-list th { color: var(--accent-primary); }
        .chart-container {
            background-color: var(--bg-secondary); padding: 20px;
            border-radius: 8px; margin-bottom: 30px;
        }

    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const useStickyState = (defaultValue, key) => {
            const [value, setValue] = useState(() => {
                try {
                    const stickyValue = window.localStorage.getItem(key);
                    return stickyValue !== null ? JSON.parse(stickyValue) : defaultValue;
                } catch {
                    return defaultValue;
                }
            });
            useEffect(() => {
                window.localStorage.setItem(key, JSON.stringify(value));
            }, [key, value]);
            return [value, setValue];
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('board');
            
            const [tasks, setTasks] = useStickyState([
                { id: 1, text: 'Design new UI/UX', column: 'To Do' },
                { id: 2, text: 'Develop Analytics Dashboard', column: 'In Progress' },
                { id: 3, text: 'Deploy to production', column: 'Done' }
            ], 'phoenix-tasks');

            const [expenses, setExpenses] = useStickyState([
                { id: 1, description: 'Cloud Server', amount: 50.00, tags: 'hosting,devops' },
                { id: 2, description: 'Design Software', amount: 20.00, tags: 'software,design' }
            ], 'phoenix-expenses');

            const renderPage = () => {
                switch (activeTab) {
                    case 'board': return <KanbanBoard tasks={tasks} setTasks={setTasks} />;
                    case 'analytics': return <AnalyticsDashboard tasks={tasks} expenses={expenses} />;
                    case 'expenses': return <ExpenseTracker expenses={expenses} setExpenses={setExpenses} />;
                    default: return <KanbanBoard tasks={tasks} setTasks={setTasks} />;
                }
            };

            return (
                <>
                    <Sidebar activeTab={activeTab} setActiveTab={setActiveTab} />
                    <div className="main-content">
                        {renderPage()}
                    </div>
                </>
            );
        };
        
        const Sidebar = ({ activeTab, setActiveTab }) => (
            <div className="sidebar">
                <div className="sidebar-header">
                    <h1>Phoenix</h1>
                    <p style={{color: 'var(--text-secondary)'}}>Dashboard</p>
                </div>
                <nav className="sidebar-nav">
                    <button onClick={() => setActiveTab('board')} className={activeTab === 'board' ? 'active' : ''}>Kanban Board</button>
                    <button onClick={() => setActiveTab('analytics')} className={activeTab === 'analytics' ? 'active' : ''}>Analytics</button>
                    <button onClick={() => setActiveTab('expenses')} className={activeTab === 'expenses' ? 'active' : ''}>Expenses</button>
                </nav>
            </div>
        );

        const TaskModal = ({ isOpen, onClose, onSave, taskText, setTaskText }) => {
            if (!isOpen) return null;
            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal-content" onClick={e => e.stopPropagation()}>
                        <h2>Add New Task</h2>
                        <textarea 
                            value={taskText}
                            onChange={(e) => setTaskText(e.target.value)}
                            placeholder="Enter task description..." 
                            autoFocus
                        />
                        <div className="modal-buttons">
                            <button className="cancel-btn" onClick={onClose}>Cancel</button>
                            <button className="save-btn" onClick={onSave}>Save Task</button>
                        </div>
                    </div>
                </div>
            );
        };

        const KanbanBoard = ({ tasks, setTasks }) => {
            const [columns] = useState(['To Do', 'In Progress', 'Done']);
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [newTaskText, setNewTaskText] = useState('');
            const [targetColumn, setTargetColumn] = useState('');

            const openModal = (column) => {
                setTargetColumn(column);
                setNewTaskText('');
                setIsModalOpen(true);
            };

            const closeModal = () => setIsModalOpen(false);

            const handleSaveTask = () => {
                if (newTaskText.trim()) {
                    const newTask = { id: Date.now(), text: newTaskText.trim(), column: targetColumn };
                    setTasks([...tasks, newTask]);
                    closeModal();
                }
            };
            
            const deleteTask = (taskId) => {
                setTasks(tasks.filter(t => t.id !== taskId));
            };

            const handleDragStart = (e, taskId) => {
                e.dataTransfer.setData("taskId", taskId);
                setTimeout(() => { e.target.classList.add('dragging'); }, 0);
            };
            
            const handleDragEnd = (e) => e.target.classList.remove('dragging');
            const handleDragOver = (e) => { e.preventDefault(); e.currentTarget.classList.add('drag-over'); };
            const handleDragLeave = (e) => e.currentTarget.classList.remove('drag-over');
            const handleDrop = (e, targetColumn) => {
                e.preventDefault();
                e.currentTarget.classList.remove('drag-over');
                const taskId = parseInt(e.dataTransfer.getData("taskId"));
                const updatedTasks = tasks.map(t => 
                    t.id === taskId ? { ...t, column: targetColumn } : t
                );
                setTasks(updatedTasks);
            };
            
            return (
                <div className="page active">
                    <TaskModal isOpen={isModalOpen} onClose={closeModal} onSave={handleSaveTask} taskText={newTaskText} setTaskText={setNewTaskText}/>
                    <div className="kanban-board-container">
                        {columns.map(column => (
                            <div key={column} className="kanban-column" onDragOver={handleDragOver} onDragLeave={handleDragLeave} onDrop={(e) => handleDrop(e, column)}>
                                <div className="kanban-column-header">
                                    <input type="text" value={column} readOnly />
                                    <span>{tasks.filter(t => t.column === column).length}</span>
                                </div>
                                <div className="tasks-container">
                                {tasks.filter(task => task.column === column).map(task => (
                                    <div key={task.id} className="task-card" draggable="true" onDragStart={(e) => handleDragStart(e, task.id)} onDragEnd={handleDragEnd}>
                                        <button className="delete-btn" onClick={() => deleteTask(task.id)}>&times;</button>
                                        <p>{task.text}</p>
                                    </div>
                                ))}
                                </div>
                                <button className="add-task-button" onClick={() => openModal(column)}>Add Task +</button>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };
        
        const AnalyticsDashboard = ({ tasks, expenses }) => {
            const taskChartRef = useRef(null);
            const expenseChartRef = useRef(null);

            useEffect(() => {
                const taskChartInstance = new Chart(taskChartRef.current, {
                    type: 'doughnut',
                    data: {
                        labels: ['To Do', 'In Progress', 'Done'],
                        datasets: [{
                            data: [
                                tasks.filter(t=>t.column==='To Do').length,
                                tasks.filter(t=>t.column==='In Progress').length,
                                tasks.filter(t=>t.column==='Done').length
                            ],
                            backgroundColor: ['#3B82F6', '#F59E0B', '#10B981'],
                        }]
                    },
                    options: { responsive: true, plugins: { legend: { labels: { color: 'white' } } } }
                });

                const expensesByTag = expenses.reduce((acc, expense) => {
                    const tags = expense.tags.split(',');
                    tags.forEach(tag => {
                        tag = tag.trim();
                        if(tag) acc[tag] = (acc[tag] || 0) + expense.amount;
                    });
                    return acc;
                }, {});
                const expenseChartInstance = new Chart(expenseChartRef.current, {
                    type: 'bar',
                    data: {
                        labels: Object.keys(expensesByTag),
                        datasets: [{
                            label: 'Expenses by Tag',
                            data: Object.values(expensesByTag),
                            backgroundColor: '#EF4444',
                        }]
                    },
                    options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { ticks: { color: 'white' } }, x: { ticks: { color: 'white' } } } }
                });

                return () => {
                    taskChartInstance.destroy();
                    expenseChartInstance.destroy();
                };
            }, [tasks, expenses]);
            
            return (
                <div className="page active">
                    <h2>Analytics Dashboard</h2>
                    <div className="chart-container" style={{maxWidth: '500px'}}>
                        <h3>Tasks by Status</h3>
                        <canvas ref={taskChartRef}></canvas>
                    </div>
                    <div className="chart-container">
                        <h3>Expenses by Tag</h3>
                        <canvas ref={expenseChartRef}></canvas>
                    </div>
                </div>
            );
        };

        const ExpenseTracker = ({ expenses, setExpenses }) => {
            const descRef = useRef(null);
            const amountRef = useRef(null);
            const tagsRef = useRef(null);

            const addExpense = (e) => {
                e.preventDefault();
                if(!descRef.current.value || !amountRef.current.value) return;
                const newExpense = {
                    id: Date.now(),
                    description: descRef.current.value,
                    amount: parseFloat(amountRef.current.value),
                    tags: tagsRef.current.value,
                };
                setExpenses([...expenses, newExpense]);
                e.target.reset();
            };
            
             const deleteExpense = (expenseId) => {
                setExpenses(expenses.filter(e => e.id !== expenseId));
            };

            return (
                <div className="page active">
                    <h2>Expense Tracker</h2>
                    <form className="expense-form" onSubmit={addExpense}>
                        <div><label>Description</label><input type="text" ref={descRef} required /></div>
                        <div><label>Amount ($)</label><input type="number" step="0.01" ref={amountRef} required /></div>
                        <div><label>Tags (comma-separated)</label><input type="text" ref={tagsRef} /></div>
                        <button type="submit">Add Expense</button>
                    </form>
                    <div className="expense-list">
                         <table>
                            <thead><tr><th>Description</th><th>Amount</th><th>Tags</th><th>Action</th></tr></thead>
                            <tbody>
                                {expenses.map(expense => (
                                    <tr key={expense.id}>
                                        <td>{expense.description}</td>
                                        <td>${expense.amount.toFixed(2)}</td>
                                        <td>{expense.tags}</td>
                                        <td><button onClick={() => deleteExpense(expense.id)} style={{backgroundColor: 'var(--accent-danger)'}}>Delete</button></td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
```

### Here's What to Do Now, Big Bro:

1.  **Replace Your Code:** Open your `kanban-board` project folder. Delete the old `index.html` file. Create a new one and paste this entire block of code into it.
2.  **Test It:** Open the new `index.html` file in your browser. It will work instantly. You'll see the beautiful new UI, the working modal, and all your data will be saved.
3.  **Update Your README:** The old `README.md` is for a much simpler project. You need a new one that shows off all these "Apex" level features. I've created it for you in our other file, `The Phoenix Dashboard README:README_Phoenix.md`.
4.  **Push to GitHub:** This is a major upgrade. Push this new version to your `kanban-board` repository with a new, powerful commit message.
    ```bash
    git add .
    git commit -m "feat: Major upgrade to Phoenix Dashboard with React, persistence, and analytics"
    git push
    

